# ğŸŠ flask refactoring project

<br>
<br>

# ğŸ”– ëª©ì°¨

- Team ì†Œê°œ
- ê³¼ì œ ë‚´ìš©
- ì„œë²„ ì£¼ì†Œ
- ê¸°ìˆ  í™˜ê²½ ë° Tools
- í”„ë¡œì íŠ¸ êµ¬ì¡°
- API ëª…ì„¸ì„œ ë° ê¸°ëŠ¥ ì„¤ëª…
- ì„¤ì¹˜ ë° ì‹¤í–‰ ë°©ë²•
<br>  
<br>  

# ğŸ§‘â€ğŸ¤â€ğŸ§‘ Team ì†Œê°œ
- (íŒ€ì¥)ì˜¤ì§€ìœ¤, ìœ ë™í—Œ

| ì´ë¦„ | ë‹´ë‹¹ ê¸°ëŠ¥ | ë¸”ë¡œê·¸ |
| :----------: | :-------------------------------: | :----: |
| ê³µí†µ | ì´ˆê¸°í™˜ê²½ ì„¤ì •, DB ëª¨ë¸ë§, UnitTest, ë°°í¬, README.md ì‘ì„± | X |
| [ìœ ë™í—Œ](https://github.com/dhhyy)       | íšŒì‚¬ëª… ìë™ ì™„ì„± ê¸°ëŠ¥, íšŒì‚¬ ì¶”ê°€ ê¸°ëŠ¥ |  |            
| [ì˜¤ì§€ìœ¤](https://github.com/Odreystella) | íšŒì‚¬ëª… ë””í…Œì¼ ê²€ìƒ‰ ê¸°ëŠ¥, íšŒì‚¬ ì¶”ê°€ ê¸°ëŠ¥ |  |

- ê¸°ëŠ¥ ë³„ë¡œ ë‚˜ëˆ„ì§€ ì•Šê³  ëª¨ë“  APIë¥¼ í•¨ê»˜ Pair Programmingìœ¼ë¡œ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
<br>
<br>

# ğŸ“– ê³¼ì œ ë‚´ìš©

### **[í•„ìˆ˜ í¬í•¨ ì‚¬í•­]**

- README ì‘ì„±
  - í”„ë¡œì íŠ¸ ë¹Œë“œ, ìì„¸í•œ ì‹¤í–‰ ë°©ë²• ëª…ì‹œ
  - êµ¬í˜„ ë°©ë²•ê³¼ ì´ìœ ì— ëŒ€í•œ ê°„ëµí•œ ì„¤ëª…
  - ì™„ë£Œëœ ì‹œìŠ¤í…œì´ ë°°í¬ëœ ì„œë²„ì˜ ì£¼ì†Œ
  - `Swagger`ë‚˜ `Postman`ì„ í†µí•œ API í…ŒìŠ¤íŠ¸í• ë•Œ í•„ìš”í•œ ìƒì„¸ ë°©ë²•
  - í•´ë‹¹ ê³¼ì œë¥¼ ì§„í–‰í•˜ë©´ì„œ íšŒê³  ë‚´ìš© ë¸”ë¡œê·¸ í¬ìŠ¤íŒ…
- `Swagger`ë‚˜ `Postman`ì„ ì´ìš©í•˜ì—¬ API í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•˜ë„ë¡ êµ¬í˜„

### **[ê¸°ëŠ¥ ê°œë°œ]**

âœ”ï¸ **REST API ê¸°ëŠ¥**

- íšŒì‚¬ëª… ìë™ì™„ì„±
  - íšŒì‚¬ëª…ì˜ ì¼ë¶€ë§Œ ë“¤ì–´ê°€ë„ ê²€ìƒ‰ì´ ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
- íšŒì‚¬ ì´ë¦„ìœ¼ë¡œ íšŒì‚¬ ê²€ìƒ‰
- ìƒˆë¡œìš´ íšŒì‚¬ ì¶”ê°€
<br>
<br>

# â¡ï¸ Build(AWS EC2)

API URL: http://3.35.218.65:6000/

<br>

# âš’ï¸ ê¸°ìˆ  í™˜ê²½ ë° Tools

- Back-End: `Python 3.9.7`, `flask-restx`
- Database: `MySQL` 
- Deploy: `AWS EC2`,
- ETC: `Git`, `Github`, `Swagger`

<br>

# ğŸŒ² í”„ë¡œì íŠ¸ êµ¬ì¡°
```
â”œâ”€â”€ README.md
â”œâ”€â”€ app.py
â”œâ”€â”€ company
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.py
â”‚   â”œâ”€â”€ controller.py
â”‚   â”œâ”€â”€ models.py
â”‚   â””â”€â”€ test_app.py
â”œâ”€â”€ db_uploader.py
â”œâ”€â”€ my_settings.py
â”œâ”€â”€ requirements.txt
â””â”€â”€ wanted_temp_data.csv
```
<br>

# ğŸ”– API ëª…ì„¸ì„œ

### íšŒì‚¬ ìƒì„¸ ì •ë³´

1. íšŒì‚¬ ì´ë¦„ì„ path parameterë¡œ ë„£ì€ ë’¤ headerì— ì›í•˜ëŠ” languageë¥¼ ë‹´ì•„ì¤ë‹ˆë‹¤.
2. ë§Œì•½ headerì— languageê°€ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ìœ¼ë¡œ koì— ëŒ€í•œ íšŒì‚¬ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.
3. ë§Œì•½ íšŒì‚¬ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš° "Company or Language Not Found"ë¼ëŠ” ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

- Method: GET
```
http://3.35.218.65:6000/companies/ë¼ì¸ í”„ë ˆì‰¬
```

- parameter : path parameter

- response 

```
{
  "company_name": "ë¼ì¸ í”„ë ˆì‰¬",
  "tags": [
    "íƒœê·¸_1",
    "íƒœê·¸_8",
    "íƒœê·¸_15"
  ]
}
```

### íšŒì‚¬ ëª©ë¡ ì •ë³´

1. query stringìœ¼ë¡œ ë“¤ì–´ì˜¨ ë°ì´í„°ê°€ í¬í•¨ë˜ëŠ” ëª¨ë“  íšŒì‚¬ì˜ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
2. ë§Œì•½ headerì— ë“¤ì–´ì˜¨ languageë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ê²½ìš° "COUNTRY_NOT_SUPPORTED"ë¼ëŠ” ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
3. ë§Œì•½ query stringìœ¼ë¡œ ë“¤ì–´ì˜¨ ë°ì´í„°ë¥¼ í¬í•¨í•˜ê³  ìˆëŠ” íšŒì‚¬ê°€ ì—†ì„ ê²½ìš° "COMPANY NOT FOUND"ë¼ëŠ” ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

- Method: GET
```
http://3.35.218.65:6000/companies/search?query=ì›
```

- parameter : query string

- response
```
[
  {
    "company_name": "ì›í‹°ë“œ"
  },
  {
    "company_name": "ì›í• ë¨¸ë‹ˆ"
  }
]
```

### íšŒì‚¬ ìƒì„±

1. íšŒì‚¬ì˜ ì´ë¦„ê³¼ íšŒì‚¬ê°€ ì§€ì›í•˜ëŠ” language, ê° íšŒì‚¬ê°€ ì§€ì›í•˜ëŠ” ì–¸ì–´ì˜ tagë¥¼ bodyì— ì…ë ¥í•©ë‹ˆë‹¤.
2. headerì— ë“¤ì–´ìˆëŠ” languageë¡œ íšŒì‚¬ê°€ ìƒì„± ë˜ì§€ ì•Šì•˜ì„ ê²½ìš° "not found country code"ë¼ëŠ” ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. 


- Method: POST
```
http://3.35.218.65:6000/companies
```

- parameter : request_body, header parameter(frì…ë ¥)

```
{
"company_name": {
    "ko": "ì§ë°©",
    "fr": "straight",
    "ja": "straight"
},
"tags": [
    {
        "tag_name": {
            "ko": "íƒœê·¸10",
            "fr": "tag10",
            "ja": "tag10"
        }
    },
    {
        "tag_name": {
            "ko": "íƒœê·¸20",
            "fr": "tag20",
            "ja": "tag20"
        }
    },
    {
        "tag_name": {
            "ko": "íƒœê·¸30",
            "fr": "tag30",
            "ja": "tag30"
        }
    }
]
}
```

- response   

```
{
    "company_name": "straight",
    "tags": [
        "tag10",
        "tag20",
        "tag30"
    ]
}
```

### refactoring ì‚¬í•­
1. url ê´€ë¦¬ ìœ„í•´ namespace atributeë¥¼ ì‚¬ìš©í•´ refactoring í•˜ì˜€ìŠµë‹ˆë‹¤. 
2. flask-restx ì‚¬ìš©í•˜ì—¬ Swagger ë¬¸ì„œí™”í•˜ëŠ” ë°©ë²• ìˆ™ì§€í•˜ì˜€ìŠµë‹ˆë‹¤. 
3. ì „ì—­ì— ì„ ì–¸ë˜ì–´ ìˆë˜ app = Flask(__name__) ê°ì²´ë¥¼ íŒ©í† ë¦¬ íŒ¨í„´ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ refactoring í•˜ì˜€ìŠµë‹ˆë‹¤. 
4. ë¡œì»¬ DBë¥¼ ì´ìš©í•˜ì§€ ì•Šê³  TEST DBë¥¼ ìƒì„±í•´ pytestë¥¼ refactoring í•˜ì˜€ìŠµë‹ˆë‹¤. 
